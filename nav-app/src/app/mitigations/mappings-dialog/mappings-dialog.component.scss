@import "../../../colors.scss";

// Override Material dialog panel styles for dark mode
::ng-deep .mappings-dialog {
  .mat-mdc-dialog-container,
  .mat-dialog-container {
    @include adaptive-color('background-color', white, color(dark-1));
    @include adaptive-color('color', #333, on-color(dark));
  }
  
  .mdc-dialog__surface {
    @include adaptive-color('background-color', white, color(dark-1));
  }
}

.mat-dialog-container {
  padding: 0;
  height: 99%;
  width: 99%;
  max-height: 200vh !important;
  max-width: 500vh !important;
  @include adaptive-color('background-color', white, color(dark-1));
}

.mappings-dialog {
  max-width: 200vw !important;
}

// Dialog title
h1[mat-dialog-title], .mat-dialog-title, .mat-mdc-dialog-title {
  @include adaptive-color('background-color', white, color(dark-1));
  @include adaptive-color('color', #333, #e0e0e0);
  padding: 16px 24px;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
  font-size: 1.5rem;
  font-weight: 500;
}

// Button toggle group in header
.mat-button-toggle-group {
  @include adaptive-color('background-color', #f0f0f0, color(dark-2));
  border-radius: 4px;
  border: none;
  overflow: hidden;
  
  .mat-button-toggle {
    @include adaptive-color('background-color', transparent, transparent);
    @include adaptive-color('color', #555, #b0b0b0);
    border: none !important;
    
    .mat-button-toggle-button {
      @include adaptive-color('color', #555, #b0b0b0);
    }
    
    &.mat-button-toggle-checked {
      @include adaptive-color('background-color', #1976d2, #3f8ccc);
      @include adaptive-color('color', white, white);
      
      .mat-button-toggle-button {
        color: white;
      }
    }
    
    &:hover:not(.mat-button-toggle-checked) {
      @include adaptive-color('background-color', #e0e0e0, color(dark-3));
    }
  }
  
  .mat-button-toggle-label-content {
    padding: 0 16px;
    line-height: 36px;
  }
}

.mappings-dialog-content {
  height: 92%;
  max-height: 200vh !important;
  max-width: 200vh !important;
  width: 99%;
  overflow: auto;
  @include adaptive-color('background-color', white, color(dark-1));
  @include adaptive-color('color', #333, #e0e0e0);
  padding: 0 16px;
}

.mappings-dialog-content-button {
  margin: 5px;
  margin-left: auto;
}

.mappings-dialog-content-mat-table {
  @include adaptive-color('background-color', white, color(dark-2));
  @include adaptive-color('color', #333, #e0e0e0);
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  
  .mat-mdc-header-row, .mat-header-row {
    @include adaptive-color('background-color', #f5f5f5, color(dark-3));
    height: 48px;
  }
  
  .mat-mdc-row, .mat-row {
    @include adaptive-color('background-color', white, color(dark-2));
    transition: background-color 0.15s ease;
    
    &:hover {
      @include adaptive-color('background-color', #f0f4ff, color(dark-3));
    }
  }
}

.mappings-dialog-content-mat-table td,
.mappings-dialog-content-mat-table th {
  padding: 12px 16px;
  @include adaptive-color('color', #333, #e0e0e0);
  @include adaptive-color('background-color', inherit, inherit);
  border-bottom: 1px solid;
  @include adaptive-color('border-color', #e0e0e0, color(dark-3));
}

.mappings-dialog-content-mat-table th {
  @include adaptive-color('background-color', #f5f5f5, color(dark-3));
  @include adaptive-color('color', #333, #e0e0e0);
  font-weight: 600;
  text-transform: uppercase;
  font-size: 0.75rem;
  letter-spacing: 0.5px;
}

.mappings-dialog-content-mat-table tr:hover td {
  @include adaptive-color('background-color', #f0f4ff, color(dark-3));
}

// Remove alternating column colors - cleaner look
.mappings-dialog-content-mat-table td:nth-child(even),
.mappings-dialog-content-mat-table th:nth-child(even) {
  @include adaptive-color('background-color', inherit, inherit);
}

.mappings-dialog-content-mat-table th:nth-child(even) {
  @include adaptive-color('background-color', inherit, inherit);
}

.mapping-dialog-nist-table {
  width: 100%;
  @include adaptive-color('background-color', white, color(dark-2));
  @include adaptive-color('color', #333, #e0e0e0);
  border-radius: 6px;
  overflow: hidden;
  
  .mat-mdc-header-row, .mat-header-row {
    @include adaptive-color('background-color', #f5f5f5, color(dark-3));
    height: 40px;
  }
  
  .mat-mdc-header-cell, .mat-header-cell {
    @include adaptive-color('background-color', #f5f5f5, color(dark-3));
    @include adaptive-color('color', #555, #b0b0b0);
    font-weight: 600;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    padding: 8px 12px;
  }
  
  .mat-mdc-row, .mat-row {
    @include adaptive-color('background-color', white, color(dark-2));
    transition: background-color 0.15s ease;
    
    &:hover {
      @include adaptive-color('background-color', #f8f9fa, color(dark-3));
    }
  }
  
  .mat-mdc-cell, .mat-cell {
    @include adaptive-color('background-color', white, color(dark-2));
    @include adaptive-color('color', #333, #e0e0e0);
    padding: 8px 12px;
    border-bottom: 1px solid;
    @include adaptive-color('border-color', #eee, color(dark-3));
  }
  
  .mat-mdc-footer-row, .mat-footer-row {
    @include adaptive-color('background-color', #fafafa, color(dark-2));
  }
  
  .mat-mdc-footer-cell, .mat-footer-cell {
    @include adaptive-color('background-color', #fafafa, color(dark-2));
    @include adaptive-color('color', #333, #e0e0e0);
    padding: 12px;
  }
  
  // Style the action buttons
  button[mat-mini-fab] {
    width: 32px;
    height: 32px;
    line-height: 32px;
    
    .mat-icon {
      font-size: 18px;
      width: 18px;
      height: 18px;
      line-height: 18px;
    }
    
    &[color="warn"] {
      @include adaptive-color('background-color', #ef5350, #d32f2f);
      
      &:hover {
        @include adaptive-color('background-color', #e53935, #c62828);
      }
    }
    
    &[color="primary"] {
      @include adaptive-color('background-color', #1976d2, #3f8ccc);
      
      &:hover {
        @include adaptive-color('background-color', #1565c0, #2196f3);
      }
    }
  }
}

.mapping-element-detail {
  overflow: hidden;
  display: flex;
  width: 100%;
  @include adaptive-color('background-color', #fafafa, color(dark-2));
  padding: 8px 0;
}

tr.mapping-detail-row {
  height: 0;
  
  td {
    @include adaptive-color('background-color', #fafafa, color(dark-2));
    padding: 0 !important;
  }
}

// Expanded row styling
tr.mitigations-component-expanded-row {
  @include adaptive-color('background-color', #f0f4ff, color(dark-3));
  
  td {
    @include adaptive-color('background-color', #f0f4ff, color(dark-3));
  }
}

.mappings-dialog-mat-column-action {
  word-wrap: break-word !important;
  white-space: unset !important;
  flex: 0 0 50px !important;
  width: 50px !important;
  min-width: 50px !important;
  overflow-wrap: break-word;
  word-wrap: break-word;
  word-break: break-word;
  -ms-hyphens: auto;
  -moz-hyphens: auto;
  -webkit-hyphens: auto;
  hyphens: auto;
}


.mappings-dialog-add-remove-button {
  width: 15px;
  margin: auto 0 auto 0;
}

.mapping-dialog-mat-select {
  width: 100%;
  margin: auto 0 auto 0;
  
  .mat-mdc-select, .mat-select {
    @include adaptive-color('color', #333, #e0e0e0);
  }
  
  .mat-mdc-form-field, .mat-form-field {
    @include adaptive-color('color', #333, #e0e0e0);
  }
}

// Form field styling for dark mode
.mat-mdc-form-field, .mat-form-field {
  @include adaptive-color('color', #333, #e0e0e0);
  
  .mat-mdc-select-value, .mat-select-value {
    @include adaptive-color('color', #333, #e0e0e0);
  }
  
  .mat-mdc-form-field-label, .mat-form-field-label {
    @include adaptive-color('color', #666, #a0a0a0);
  }
  
  .mdc-text-field--filled:not(.mdc-text-field--disabled) {
    @include adaptive-color('background-color', #f5f5f5, color(dark-3));
  }
}

.mappings-dialog-mat-tooltip {
  font-size: 20px !important;
}

.mappings-dialog-mapping-container {
  max-height: 400px;
  overflow: auto;
  margin: 12px;
  @include adaptive-color('background-color', white, color(dark-2));
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  @include adaptive-color-dark-only('box-shadow', 0 2px 12px rgba(0, 0, 0, 0.4));
}

.hide {
  display: none;
}

// Dialog actions (close button area)
.mat-dialog-actions, .mat-mdc-dialog-actions, [mat-dialog-actions] {
  @include adaptive-color('background-color', white, color(dark-1));
  @include adaptive-color('color', #333, #e0e0e0);
  padding: 12px 24px;
  border-top: 1px solid;
  @include adaptive-color('border-color', #e0e0e0, color(dark-3));
}
